# Custom Provider Overview

Terraform providers work closely with the idea of CRUD operations. Meaning that the providers
try to classify API functionality into 4 groups, here are examples related to our API:

- C[reate]
  - Creates new resource: dev, ops, devops, engineers
- R[ead]
  - Read in an existing resource
- U[pdate]
  - Update an existing resource, however we can not affect the sub-resources (engineers) inside it
- D[elete]
  - Deletes an existing resource, however we can not affect those resource's children

## Schema

The terraform provider framework manages data through its schema. The schema is the structure of data
internal to the provider. This schema should loosely mirror the API data structure.[schema docs](https://developer.hashicorp.com/terraform/plugin/sdkv2/schemas)

### File Hierarchy

![boiler plate file tree](file_tree.png)

### Look inside the internal directory

``` Go
    type ExampleDataSourceModel struct {
        ConfigurableAttribute types.String `tfsdk:"configurable_attribute"`
        Id                    types.String `tfsdk:"id"`
    }
```

- this code can be found [example_data_source.go](https://github.com/hashicorp/terraform-provider-scaffolding-framework/blob/95358ccbb8c897150c9cbe973c237448bdefcd4f/internal/provider/example_data_source.go)
- this is how data should be model and stored in the provider

#### [example_resource.go](https://github.com/hashicorp/terraform-provider-scaffolding-framework/blob/95358ccbb8c897150c9cbe973c237448bdefcd4f/internal/provider/example_resource.go)

- This files shows use of crud operations
- As well as metadata and GetSchema which are important for documentation and building resources


## Exercise 1: Implementing the provider

Let's talk about how to get started with creating a custom provider. It's important to know that there are providers available for AWS, Azure, GCP â€¦
Let's begin by setting up the provider.go, add the starter code below your goal is to figure out what belongs where.

Steps:

1. In internal/provider/provider.go copy and paste the starter code below

```GO
package provider

import (
    "context"

    "github.com/hashicorp/terraform-plugin-framework/datasource"
    "github.com/hashicorp/terraform-plugin-framework/diag"
    "github.com/hashicorp/terraform-plugin-framework/provider"
    "github.com/hashicorp/terraform-plugin-framework/resource"
    "github.com/hashicorp/terraform-plugin-framework/tfsdk"
    "github.com/hashicorp/terraform-plugin-framework/types"
)

// Ensure ScaffoldingProvider satisfies various provider interfaces.
var _ provider.Provider = &ScaffoldingProvider{}
var _ provider.ProviderWithMetadata = &ScaffoldingProvider{}

// ScaffoldingProvider defines the provider implementation.
type ScaffoldingProvider struct {

}

// ScaffoldingProviderModel describes the provider data model.
type ScaffoldingProviderModel struct {
    
}

// Sets up a provider block for terraform
func (p *ScaffoldingProvider) Metadata(ctx context.Context, req provider.MetadataRequest, resp *provider.MetadataResponse) {
    
}

func (p *ScaffoldingProvider) GetSchema(ctx context.Context) (tfsdk.Schema, diag.Diagnostics){
  
}

func (p *ScaffoldingProvider) Configure(ctx context.Context, req provider.ConfigureRequest, resp *provider.ConfigureResponse){

    }

    // Configuration values are now available.
    // if data.Endpoint.IsNull() { /* ... */ }
    host := data.Endpoint.ValueString()
    // Example client configuration for data sources and resources
    client, err := NewClient(&host)
    if err != nil {
       
}

// refactoring this part since we are setting an engineer resource not example resource
func (p *ScaffoldingProvider) Resources(ctx context.Context) []func() resource.Resource {
   
}

func (p *ScaffoldingProvider) DataSources(ctx context.Context) []func() datasource.DataSource {
    
}

// Makes new provider for "devops-bootcamp"
func New(version string) func() provider.Provider {
    
}

```

> **_NOTE:_**  Note you will need to make changes to this file as you add datasources

## Exercise 2: Implementing Engineer Datasource

## Implementing the data source for an engineer

## Steps

1. Create a file engineer_data_source.go
2. Define the initial data source type.
3. Add data source to provider.
4. Implement the Engineeer client in the data source.
5. Define the data source schema.
6. Define the data source data model.
7. Define the data source read logic.
8. Check if read works.

> **_NOTE:_** Once you have completed the Datasource dont forget to update the provider.go file
