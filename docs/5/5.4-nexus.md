# Nexus

Nexus is a repository manager for Java artifacts and is useful for keeping track of
versions of Snapshots and Releases. Previously in the Bootcamp, we've deployed artifacts to Nexus as a final step in our pipeline. 
However, in production deploying to Nexus would serve as an intermediate step with other tools using it down the pipeline.
In this section we'll be setting up a pipeline using Nexus as a repository for our build artifacts. 

<center>

  ![](../img/nexus.png)

</center>

# Setup Nexus

1. Install Nexus on a new sever.
2. Configure a Jenkins [spring-petclinic](https://github.com/liatrio/spring-petclinic) job to deploy SNAPSHOT artifacts to your Nexus.

Confirm that your artifact was deployed.

# Retrieving Artifacts from Nexus

0: Basic Overview:
  1. Create an ssh key
  2. In the "Manage Jenkins" section of your Jenkins instance, create an ssh server "Tomcat" using the info from your Tomcat instance and the private key of the key you created
  3. Create a "tomcat-deploy" job in Jenkins
  4. Have this "tomcat-deploy" job execute an ssh command from your newly created tomcat server that will deploy a .war file to your Tomcat instance

1: Creating an SSH key
  1. In a directory of your choice run the ssh-keygen command
  2. Ensure that you are familiar with the workings of private keys, and know how to use them properly

2: Create a Tomcat server in "Manage Jenkins"

  In your Jenkins job, fill in the SSH Server section with your Tomcat server info and the private key you created.

3: Create a tomcat-deploy job in Jenkins

  By this point you are familiar with the process of creating a job in Jenkins. Make one which will run an SSH command on your tomcat server. It is smarter to do this instead of running a post-build action SSH command because you can make this job run on whatever triggers you specify, rather than after a certain job.

4: Execute a command while SSH'd into your Tomcat server

  In the "build" section of your tomcat-deploy job's configurations, select "send files or execute commands over SSH". Select the server you recently created in your "Manage Jenkins" settings in the dropdown box on top.

On your own, research and find a good command that will get the .war file from your nexus and deploy it to the spot that you want. A good place to start your research is at the link below:

http://stackoverflow.com/questions/22569710/how-can-i-automatically-deploy-a-war-from-nexus-to-tomcat

### Deliverable

  Have a Jenkins job deploy an artifact from a repository to Nexus, then deploy the artifact from Nexus to Tomcat.
