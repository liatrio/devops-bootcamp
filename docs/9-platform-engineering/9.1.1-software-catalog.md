---
docs/9-platform-engineering/9.1.1-software-catalog.md:
  category: Backstage Software Catalog
  estReadingMinutes: 20
  exercises:
    - name: Entity Registration
      description: |
        This exercise instructs students to register an entity to their local Backstage instance.  The entity should correspond to a repo belonging to a GitHub organization that the student owns.  This exercise will require students to configure their Backstage instance to have the permissions needed to access their GitHub organization and will help pave the way for the following exercise.
      estMinutes: 20
      technologies:
        - Backstage
        - GitHub
        
    - name: Catalog Ingestion
      description: |
        Students will configure their Backstage instance to automatically perform read operations on a given GitHub organization and ingest `catalog-info.yaml` files existing in that organization in order to automatically register entities.  They will need to configure GitHub as a catalog and ensure that their Backstage instance combs their organization for the correct file(s) at an appropriate interval.
      estMinutes: 80
      technologies:
        - Backstage
        - GitHub

    - name: Dependency Graphs
      description: |
        Students will fork two interdependent repos to their organization and ensure that their Backstage instance recognizes the two repos while also displaying the repos' interdependence via the "Relations" section of their overviews in the UI.  This requires a thorough understanding of the available fields in `catalog-info.yaml` files along with a Backstage app's configuration file.  
      estMinutes: 120
      technologies:
        - Backstage
        - GitHub

    - name: OpenAPI Definitions
      description: |
        Here, students are required to provide an OpenAPI specification which their Backstage instance can ingest and associate with a definition for an API having source code in a repo owned by the student's organization.  Students may use a repo that already has an Open API spec file or they may generate the necessary spec data from an API.  
      estMinutes: 30
      technologies:
        - Backstage
        - GitHub
---

# Backstage Software Catalog

The Software Catalog is a key feature of Backstage.  Please read more about it on the [Backstage website](https://backstage.io/docs/features/software-catalog/).

### Exercise 1: Register an entity to Backstage

In Backstage, entities represent different types of resources within your system.  They are defined using YAML files and registered in the Backstage catalog.  Each entity type has a specific purpose and schema.  

1. Following Backstage's [Getting Started](https://backstage.spotify.com/learn/standing-up-backstage/putting-backstage-into-action/8-integration/) guide, add a GitHub integration to your Backstage instance.

  ?> These instructions use a personal access token to authenticate Backstage with GitHub, but you may also use a [GitHub App](https://backstage.io/docs/integrations/github/github-apps).  

2. Continue following the above guide to manually register a component entity to your Backstage instance.  *You may find it helpful for future exercises to take note of the information that is provided alongside your components in the UI, and consider where it comes from.*

### Exercise 2: Stand up local instance of Backstage

1. Now that you have manually registered an entity to Backstage, configure your Backstage instance to automatically register entities based on repos that it detects within a GitHub organization that you own.  

  ?> See [GitHub Discovery](https://backstage.io/docs/integrations/github/discovery/) for a useful guide.

### Exercise 3: Generate a dependency graph

One useful feature of Backstage is its ability to leverage `catalog-info.yaml` files to automatically generate dependency graphs depicting the relationship between entities in a software ecosystem.  The visual aid provided by these graphs can help users quickly understand complex systems.

1. Fork two interdependent repos, such as [dks-ui](https://github.com/liatrio/dks-ui) and [dks-api](https://github.com/liatrio/dks-api).

2. Add GitHub Authentication to the Sign-In page
3. Verify that you can login via GitHub

## Deliverables

- When (if ever) might it make sense to manually register an entity to Backstage?
- What are some benefits and disadvantages of Backstage's Software Catalog feature?
- What are some of the main types of entities in Backstage and how are they related to each other?
- How can one effectively use the Software Catalog to track a highly complex software ecosystem, e.g., one consisting of thousands of services?  What if the ecosystem is already in place before implementing the Software Catalog?
