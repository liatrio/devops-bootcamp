---
docs/6-software-development-practices/6.5.2-functional-testing.md:
  category: Software Quality
  estReadingMinutes: 20
  exercises:
    -
      name: Create functional tests with Selenium in Python
      description: Create functional tests for the bootcamp using Selenium in Python.
      estMinutes: 120
      technologies:
      - Selenium
      - Python
    -
      name: Create functional tests with Playwright in Python
      description: Create functional tests for the bootcamp using Playwright in Python.
      estMinutes: 60
      technologies:
      - Playwright
      - Python
---

# Functional Testing

While unit testing tests small pieces (or units) of code, functional testing combines multiple units to test particular functionality of the code. Unlike unit testing, functional testing typically involves testing functionality that uses project dependencies, such as a connection to a database. This means that functional testing often takes longer and is more in depth than unit testing.

## How to do functional testing

Functional tests are written from a user’s perspective. That is, you should be testing that the system performs how you (and the user) expect. Since functional testing is highly dependent on the use cases for the application, how you write functional tests will vary widely.

## Example

One popular tool for functional testing of websites and web applications is Playwright. Playwright is an open-source framework for browser automation. It allows you to write tests that programmatically interact with a website, checking functionality. This is extremely helpful in automating tests, as the same tests can be performed across all major browsers.

An example use case of Playwright is testing a web application’s login form. While a unit test might check that the email field only accepts valid email addresses, a functional test using Playwright could verify that logging in with a valid email and password successfully logs the user in.

## Exercise 1:

We'll use Playwright and pytest to run functional tests. This approach is popular for its modern features, speed, and reliability. We'll manage our project's dependencies with uv.We're going to take this opportunity to introduce you to `uv` [\(docs\)](https://docs.astral.sh/uv/), a python tool somewhat similar to `npm` in the JavaScript ecosystem.

`uv` allows you to manage a python projects dependencies in a declarative manner (like `pip`), set up virtual python environments, declare required python versions, and more.

1. Set up Your Project
   First, install uv (a fast Python package manager).

   `brew install uv`

   Next, create a project directory and initialize a virtual environment with uv.

   `mkdir playwright-tests`

   `cd playwright-tests`

   `uv init`

2. Add Dependencies
    Use uv to add Playwright and its pytest plugin to your project.
   `uv add playwright pytest-playwright`

3. Install Browser Drivers
   Playwright requires its own browser binaries. Install them by running:
   `uv run playwright install`

4. Use the starter code provided to test
    * The link in the bottom right corner of the homepage takes you to [the bootcamp introduction](https://devops-bootcamp.liatr.io/#/1-introduction/1.0-overview)
    * The sidebar toggle button properly hides the sidebar

```python
import re
from playwright.sync_api import Page, expect

BASE_URL = "https://devops-bootcamp.liatr.io"

def test_bootcamp_link(page: Page):
    """Tests that the 'Introduction to DevOps' link navigates correctly."""
    # go to the bootcamp site
    page.goto(BASE_URL)

    # check we get expected page title
    expect(page).to_have_title(re.compile("Welcome"))

    # find the link to Introduction to DevOps section
    page.get_by_role("link", name=re.compile("Introduction to DevOps")).first.click()

    # check that we get the expected url
    expect(page).to_have_url(re.compile(".*/1-introduction/.*"))

def test_bootcamp_sidebar(page: Page):
    """Tests that the sidebar toggle button works correctly."""
    # go to the bootcamp site
    page.goto(BASE_URL)

    # check that the sidebar is shown (HINT: check html body attributes)
    body = page.locator("body")
    expect(body).not_to_have_attribute("class", re.compile("close"))

    # find the sidebar toggle and toggle it
    toggle_button = page.locator(".sidebar-toggle").first
    toggle_button.click()

    # after toggling sidebar, check that it is closed
    expect(body).to_have_attribute("class", re.compile("close"))
```

While these are fairly trivial functional tests, they serve to show in general how they differ from unit tests.

## Exercise 2:

While [Playwright](https://playwright.dev/) is becoming more popular due to its ease of use,[Selenium](https://www.selenium.dev/) is still in common use.

1. Install a Selenium WebDriver of your choice.(`brew install geckodriver` for firefox.)
2. Install the Selenium Python bindings.(`pip install selenium`)
3. Write the same tests from Exercise 1, but this time using Selenium.

?>While Selenium is more established,the tests you write with it serve the same role:functional testing,not unit testing.

# Deliverables

* Discuss the differences between functional testing and unit testing.
* Discuss if it's valuable to write functional tests for a project with full unit test coverage.
* Discuss the differences between Selenium and Playwright, and when you might want to use one over the other.
* How does Selenium and Playwright's locator methods differ?
